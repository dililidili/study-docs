# 2.1、ES倒排索引介绍

​		Lucene 作为 Apache 开源的一款搜索工具，一直以来是实现搜索功能的神兵利器，现今火热的 Solr 和 Elasticsearch 均基于该工具包进行开发，而 Lucene 之所以能在搜索中发挥至关重要的作用正是因为**倒排索引**。因此，本文将介绍一下倒排索引的概念以及倒排索引在 Lucene 中的实现。

<img src="https://raw.githubusercontent.com/dililidili/study-docs/main/docs/img/Elasticsearch/image-20220908173059108.png" alt="image-20220908173059108" style="zoom:80%;" />

## 1、基本原理

### 1.1、什么是倒排索引

**倒排索引是区别于正排索引的概念：**

- **正排索引**：是以文档对象的唯一 ID 作为索引，以文档内容作为记录的结构。
- **倒排索引**：Inverted index，指的是将文档内容中的单词作为索引，将包含该词的文档 ID 作为记录的结构。

![倒排索引](https://raw.githubusercontent.com/dililidili/study-docs/main/docs/img/Elasticsearch/image-20220908152423805.png)

### 1.2、倒排索引生成过程

**下面通过一个例子来说明下倒排索引的生成过程**。

假设目前有以下两个文档内容：

1.苏州街维亚大厦  
2.桔子酒店苏州街店

**其处理步骤如下**：

##### 1.正排索引给每个文档进行编号，作为其唯一的标识。

| 文档 id | content          |
| ------- | ---------------- |
| 1       | 苏州街维亚大厦   |
| 2       | 桔子酒店苏州街店 |

##### 2、生成倒排索引：

- 首先要对字段的内容进行分词，分词就是将一段连续的文本按照语义拆分为多个单词，这里两个文档包含的关键词有：苏州街、维亚大厦…
- 然后按照单词来作为索引，对应的文档 id 建立一个链表，就能构成上述的倒排索引结构。

| Word     | 文档 id |
| -------- | ------- |
| 苏州街   | 1,2     |
| 维亚大厦 | 1       |
| 维亚     | 1       |
| 桔子     | 2       |
| 酒店     | 2       |
| 大赛     | 1       |

有了倒排索引，能快速、灵活地实现各类搜索需求。整个搜索过程中我们不需要做任何文本的模糊匹配。

[参考推荐](https://blog.csdn.net/qq_31960623/article/details/118860928)



