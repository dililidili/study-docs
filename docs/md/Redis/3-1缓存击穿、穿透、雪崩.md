# 3.1、缓存击穿

#### 1.发生条件：

1. 大量并发产生
2. redis key刚好过期

#### 2.解决办法

1.当第一个请求进入获取redis key时因为过期获取不到此时给redis加setnx锁

2.只有获得锁的才可以直接去DB(数据库)中获取数据并缓存在redis中

3.释放锁 剩下的并发量直接命中redis

#### 3.注意

1.锁需要设置过期时间

2.剩下的并发量设置睡眠等待时间 需要压测得出



-------------------------------------------------

# 3.2、缓存穿透

#### 1.发生条件

1.大量并发 访问数据库中不存在的数据

#### 2.解决办法

1.使用布隆过滤器

----

# 3.3、雪崩

#### 1.发生条件

1.大量并发产生

2.大量key刚好过期

#### 2.解决办法

第一种：时间点有关

1.比如凌晨12点更新某些数据  此时采用击穿的解决方法上锁

第二种：时间点无关

2.设置随机过期时间